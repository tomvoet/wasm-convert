(function(){"use strict";var g=(e=>(e[e.PROGRESS=0]="PROGRESS",e[e.DONE=1]="DONE",e[e.ERROR=2]="ERROR",e))(g||{});let i;const m=typeof TextDecoder<"u"?new TextDecoder("utf-8",{ignoreBOM:!0,fatal:!0}):{decode:()=>{throw Error("TextDecoder not available")}};typeof TextDecoder<"u"&&m.decode();let _=null;function y(){return(_===null||_.byteLength===0)&&(_=new Uint8Array(i.memory.buffer)),_}function R(e,n){return e=e>>>0,m.decode(y().subarray(e,e+n))}const s=new Array(128).fill(void 0);s.push(void 0,null,!0,!1);let b=s.length;function u(e){b===s.length&&s.push(s.length+1);const n=b;return b=s[n],s[n]=e,n}function a(e){return s[e]}function T(e){e<132||(s[e]=b,b=e)}function E(e){const n=a(e);return T(e),n}function v(e,n){try{return e.apply(this,n)}catch(t){i.__wbindgen_exn_store(u(t))}}let d=128;function O(e){if(d==1)throw new Error("out of js stack");return s[--d]=e,d}let h=0;const p=typeof TextEncoder<"u"?new TextEncoder("utf-8"):{encode:()=>{throw Error("TextEncoder not available")}},x=typeof p.encodeInto=="function"?function(e,n){return p.encodeInto(e,n)}:function(e,n){const t=p.encode(e);return n.set(t),{read:e.length,written:t.length}};function S(e,n,t){if(t===void 0){const f=p.encode(e),l=n(f.length,1)>>>0;return y().subarray(l,l+f.length).set(f),h=f.length,l}let r=e.length,o=n(r,1)>>>0;const w=y();let c=0;for(;c<r;c++){const f=e.charCodeAt(c);if(f>127)break;w[o+c]=f}if(c!==r){c!==0&&(e=e.slice(c)),o=t(o,r,r=c+e.length*3,1)>>>0;const f=y().subarray(o+c,o+r),l=x(e,f);c+=l.written,o=t(o,r,c,1)>>>0}return h=c,o}function D(e,n,t,r){try{const o=S(n,i.__wbindgen_malloc,i.__wbindgen_realloc),w=h,c=S(t,i.__wbindgen_malloc,i.__wbindgen_realloc),f=h,l=i.convert_image(O(e),o,w,c,f,O(r));return E(l)}finally{s[d++]=void 0,s[d++]=void 0}}async function U(e,n){if(typeof Response=="function"&&e instanceof Response){if(typeof WebAssembly.instantiateStreaming=="function")try{return await WebAssembly.instantiateStreaming(e,n)}catch(r){if(e.headers.get("Content-Type")!="application/wasm")console.warn("`WebAssembly.instantiateStreaming` failed because your server does not serve wasm with `application/wasm` MIME type. Falling back to `WebAssembly.instantiate` which is slower. Original error:\n",r);else throw r}const t=await e.arrayBuffer();return await WebAssembly.instantiate(t,n)}else{const t=await WebAssembly.instantiate(e,n);return t instanceof WebAssembly.Instance?{instance:t,module:e}:t}}function j(){const e={};return e.wbg={},e.wbg.__wbg_call_8e7cb608789c2528=function(){return v(function(n,t,r,o){const w=a(n).call(a(t),a(r),a(o));return u(w)},arguments)},e.wbg.__wbindgen_throw=function(n,t){throw new Error(R(n,t))},e.wbg.__wbindgen_number_new=function(n){return u(n)},e.wbg.__wbindgen_string_new=function(n,t){const r=R(n,t);return u(r)},e.wbg.__wbindgen_object_drop_ref=function(n){E(n)},e.wbg.__wbg_length_c20a40f15020d68a=function(n){return a(n).length},e.wbg.__wbindgen_memory=function(){const n=i.memory;return u(n)},e.wbg.__wbg_buffer_12d079cc21e14bdb=function(n){const t=a(n).buffer;return u(t)},e.wbg.__wbg_new_63b92bc8671ed464=function(n){const t=new Uint8Array(a(n));return u(t)},e.wbg.__wbg_set_a47bac70306a19a7=function(n,t,r){a(n).set(a(t),r>>>0)},e.wbg.__wbg_newwithbyteoffsetandlength_aa4a17c33a06e5cb=function(n,t,r){const o=new Uint8Array(a(n),t>>>0,r>>>0);return u(o)},e}function L(e,n){return i=e.exports,A.__wbindgen_wasm_module=n,_=null,i}async function A(e){if(i!==void 0)return i;typeof e>"u"&&(e=new URL(""+new URL("wasm_convert_bg-DdtPq7vS.wasm",self.location.href).href,self.location.href));const n=j();(typeof e=="string"||typeof Request=="function"&&e instanceof Request||typeof URL=="function"&&e instanceof URL)&&(e=fetch(e));const{instance:t,module:r}=await U(await e,n);return L(t,r)}globalThis.addEventListener("message",async e=>{await A();try{const t={success:!0,data:D(e.data.inputFile,e.data.inputType,e.data.outputType,W)};globalThis.postMessage({type:g.DONE,payload:t})}catch(n){const t={success:!1,error:String(n)};globalThis.postMessage({type:g.ERROR,payload:t})}},!1);function W(e,n){globalThis.postMessage({type:g.PROGRESS,payload:{progress:e,message:n}})}})();
